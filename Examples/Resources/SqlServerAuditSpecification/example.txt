import-module sqlserverdsc

Configuration MSFT_SqlServerAuditDemo
{
    Import-DscResource -ModuleName SqlServerDSC -ModuleVersion '13.1.0.0'
    Import-DscResource –ModuleName 'PSDesiredStateConfiguration'

    node localhost
    {
        SqlServerAudit 'SrvAdt01'
        {
            Ensure               = 'Present'
            ServerName           = 'SQL2019-01'
            InstanceName         = 'INST01'
            Name                 = 'SAdt'
            DestinationType      = 'File'
            FilePath             = 'C:\Temp\audit\5'
            Enabled              = $true
            MaximumFileSize      = 10
            MaximumFileSizeUnit  = 'MB'
            MaximumRolloverFiles = 11
        }

        SqlServerAuditSpecification 'SrvAdtSpec01'
        {
            Ensure                    = 'Present'
            ServerName                = 'SQL2019-01'
            InstanceName              = 'INST01'
            Name                      = 'AdminAudit'
            AuditName                 = 'SAdt'
            Enabled                   = $true
            DatabaseObjectAccessGroup = $true
            DependsOn                 = "[SqlServerAudit]SrvAdt01"
        }
    }
}
MSFT_SqlServerAuditDemo -OutputPath c:\temp

Start-DscConfiguration -Path 'C:\temp\' -Wait -force -Verbose